<!doctype html>
<es-clause title="SetMutableBinding (N,V,S)" anchor=
"sec-declarative-environment-records-setmutablebinding-n-v-s">
  <p>The concrete <a href="#sec-environment-records">Environment Record</a> method
  SetMutableBinding for declarative environment records attempts to change the bound value of the
  current binding of the identifier whose name is the value of the argument <es-nt>N</es-nt> to the
  value of argument <es-nt>V</es-nt>. A binding for <es-nt>N</es-nt> must already exist. If the
  binding is an immutable binding, a <b>TypeError</b> is thrown if S is <span class=
  "value">true</span>.</p>

  <ol class="proc">
    <li>Let <i>envRec</i> be the <a href="#sec-declarative-environment-records">declarative
    environment record</a> for which the method was invoked.
    </li>

    <li>
      <a href="#sec-algorithm-conventions">Assert</a> : <i>envRec</i> must have a binding for
      <i>N</i>.
    </li>

    <li>If the binding for <i>N</i> in <i>envRec</i> has not yet been initialised throw a
    <b>ReferenceError</b> exception.</li>

    <li>Else if the binding for <i>N</i> in <i>envRec</i> is a mutable binding, change its bound
    value to <i>V</i>.</li>

    <li>Else this must be an attempt to change the value of an immutable binding so if <i>S</i> is
    <b>true</b> throw a <b>TypeError</b> exception.</li>

    <li>Return <a href="#sec-normalcompletion">NormalCompletion</a> (empty).
    </li>
  </ol>
</es-clause>
