<!doctype html>
<es-clause title="CreateGlobalVarBinding (N, D)" anchor="sec-createglobalvarbinding">
  <p>The concrete <es-xref target="sec-environment-records">Environment Record</es-xref> method
  CreateGlobalVarBinding for global environment records creates a mutable binding in the associated
  <es-xref target="sec-object-environment-records">object environment record</es-xref> and records
  the bound name in the associated VarNames <es-xref target=
  "sec-list-and-record-specification-type">List</es-xref>. If a binding already exists, it is
  reused.</p>

  <ol class="proc">
    <li>Let <i>envRec</i> be the <es-xref target="sec-declarative-environment-records">declarative
    environment record</es-xref> for which the method was invoked.</li>

    <li>Let <i>ObjRec</i> be <i>envRec’s</i> ObjectEnvironment.</li>

    <li>If the result of calling <i>ObjRec’s</i> HasBinding concrete method with argument <i>N</i>
    is <b>false</b>, then

      <ol class="block">
        <li>Let <i>status</i> be the result of calling the CreateMutableBinding concrete method of
        <i>ObjRec</i> with arguments <i>N</i> and <i>D</i>.</li>

        <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>status</i>).</li>
      </ol>
    </li>

    <li>Let <i>varDeclaredNames</i> be <i>envRec’s</i> VarNames <es-xref target=
    "sec-list-and-record-specification-type">List</es-xref>.</li>

    <li>If <i>varDeclaredNames</i> does not contain the value of <i>N</i>, then

      <ol class="block">
        <li>Append <i>N</i> to <i>varDeclaredNames</i>.</li>
      </ol>
    </li>

    <li>Return <es-xref target="sec-normalcompletion">NormalCompletion</es-xref>(empty).</li>
  </ol>
</es-clause>
