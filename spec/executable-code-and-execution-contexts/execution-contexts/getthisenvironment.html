<!doctype html>
<es-clause title="GetThisEnvironment" anchor="sec-getthisenvironment">
  <p>The abstract operation GetThisEnvironment finds the <es-xref target=
  "sec-lexical-environments">lexical environment</es-xref> that currently supplies the binding of
  the keyword <code>this</code>. GetThisEnvironment performs the following steps:</p>

  <ol class="proc">
    <li>Let <i>lex</i> be <es-xref target="sec-execution-contexts">the running execution
    context</es-xref>’s <es-xref target="sec-execution-contexts">LexicalEnvironment</es-xref>.</li>

    <li>Repeat

      <ol class="block">
        <li>Let <i>envRec</i> be <i>lex</i>’s environment record.</li>

        <li>Let <i>exists</i> be the result of calling the HasThisBinding concrete method of
        <i>envRec</i>.</li>

        <li>If <i>exists</i> is <code>true</code>, then return <i>envRec</i>.</li>

        <li>Let <i>outer</i> be the value of <i>lex’s</i> <es-xref target=
        "sec-lexical-environments">outer environment reference</es-xref>.</li>

        <li>Let <i>lex</i> be <i>outer</i>.</li>
      </ol>
    </li>
  </ol>

  <es-note>
    <p>The loop in step 2 will always terminate because the llst of environments always ends with
    <es-xref target="sec-global-environment-records">the global environment</es-xref> which has a
    <code>this</code> binding.</p>
  </es-note>
</es-clause>
