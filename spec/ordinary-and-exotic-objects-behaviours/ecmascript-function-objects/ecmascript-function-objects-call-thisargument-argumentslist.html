<!doctype html>
<es-clause title="[[Call]] ( thisArgument, argumentsList)" anchor=
"sec-ecmascript-function-objects-call-thisargument-argumentslist">
  <p>The [[Call]] internal method for an <a href="#sec-ecmascript-function-objects">ECMAScript
  function object</a> <es-nt>F</es-nt> is called with parameters <es-nt>thisArgument</es-nt> and
  <es-nt>argumentsList</es-nt>, a <a href="#sec-list-and-record-specification-type">List</a> of
  <a href="#sec-ecmascript-language-types">ECMAScript language values</a> . The following steps are
  taken:</p>

  <ol class="proc">
    <li>If <i>F</i>’s [[Code]] <a href="#sec-object-internal-methods-and-internal-slots">internal
    slot</a> has the value <b>undefined</b>, then throw a <b>TypeError</b> exception.
    </li>

    <li>Let <i>callerContext</i> be <a href="#sec-execution-contexts">the running execution
    context</a> .
    </li>

    <li>If <i>callerContext</i> is not already <a href="#sec-execution-contexts">suspended</a> ,
    then <a href="#sec-execution-contexts">Suspend</a> <i>callerContext</i>.
    </li>

    <li>Let <i>calleeContext</i> be a new <a href="#sec-execution-contexts">ECMAScript Code
    execution context</a> .
    </li>

    <li>Let <i>calleeRealm</i> be the value of <i>F’s</i> [[Realm]] <a href=
    "#sec-object-internal-methods-and-internal-slots">internal slot</a> .
    </li>

    <li>Set <i>calleeContext’s</i> <a href="#sec-code-realms">Realm</a> to <i>calleeRealm</i>.
    </li>

    <li>Let <i>thisMode</i> be the value of <i>F</i>’s [[ThisMode]] <a href=
    "#sec-object-internal-methods-and-internal-slots">internal slot</a> .
    </li>

    <li>If <i>thisMode</i> is lexical, then

      <ol class="block">
        <li>Let <i>localEnv</i> be the result of calling <a href="#sec-newdeclarativeenvironment">
          NewDeclarativeEnvironment</a> passing the value of the [[Environment]] <a href=
          "#sec-object-internal-methods-and-internal-slots">internal slot</a> of <i>F</i> as the
          argument.
        </li>
      </ol>
    </li>

    <li>Else,

      <ol class="block">
        <li>If <i>thisMode</i> is strict, set <i>thisValue</i> to <i>thisArgument</i>.</li>

        <li>Else

          <ol class="block">
            <li>if <i>thisArgument</i> is <b>null</b> or <b>undefined</b>, then

              <ol class="block">
                <li>Set <i>thisValue</i> to <i>calleeRealm</i>.[[globalThis]].</li>
              </ol>
            </li>

            <li>Else if <a href="#sec-ecmascript-data-types-and-values">Type</a>
            (<i>thisArgument</i>) is not Object, set the <i>thisValue</i> to <a href=
            "#sec-toobject">ToObject</a> (<i>thisArgument</i>).
            </li>

            <li>Else set the <i>thisValue</i> to <i>thisArgument</i>.</li>
          </ol>
        </li>

        <li>Let <i>localEnv</i> be the result of calling <a href=
        "#sec-newfunctionenvironment">NewFunctionEnvironment</a> passing <i>F</i> and
        <i>thisValue</i> as the arguments.
        </li>

        <li>
          <a href="#sec-returnifabrupt">ReturnIfAbrupt</a> (<i>localEnv</i>).
        </li>
      </ol>
    </li>

    <li>Set the <a href="#sec-execution-contexts">LexicalEnvironment</a> of <i>calleeContext</i> to
    <i>localEnv</i>.
    </li>

    <li>Set the <a href="#sec-execution-contexts">VariableEnvironment</a> of <i>calleeContext</i>
    to <i>localEnv</i>.
    </li>

    <li>Push <i>calleeContext</i> onto <a href="#sec-execution-contexts">the execution context
    stack</a> ; <i>calleeContext</i> is now <a href="#sec-execution-contexts">the running execution
    context</a> .
    </li>

    <li>Let <i>status</i> be the result of performing <a href=
    "#sec-function-declaration-instantiation">Function Declaration Instantiation</a> using the
    function <i>F</i>, <i>argumentsList</i> , and <i>localEnv</i> as described in <a href=
    "#sec-function-declaration-instantiation">9.2.14</a> .
    </li>

    <li>If <i>status</i> is an <a href="#sec-completion-record-specification-type">abrupt
    completion</a> , then

      <ol class="block">
        <li>Remove <i>calleeContext</i> from <a href="#sec-execution-contexts">the execution
        context stack</a> and restore <i>callerContext</i> as <a href="#sec-execution-contexts">the
        running execution context</a> .
        </li>

        <li>Return <i>status</i>.</li>
      </ol>
    </li>

    <li>Let <i>result</i> be the result of EvaluateBody of the production that is the value of <i>
      F</i>'s [[Code]] <a href="#sec-object-internal-methods-and-internal-slots">internal slot</a>
      passing <i>F</i> as the argument.
    </li>

    <li>Remove <i>calleeContext</i> from <a href="#sec-execution-contexts">the execution context
    stack</a> and restore <i>callerContext</i> as <a href="#sec-execution-contexts">the running
    execution context</a> .
    </li>

    <li>Return <i>result</i>.</li>
  </ol>

  <es-note>
    <p>Most ECMAScript functions use a <a href="#sec-function-environment-records">Function
    Environment Record</a> as their <a href="#sec-execution-contexts">LexicalEnvironment</a> .
    ECMAScript functions that are arrow functions use a <a href=
    "#sec-declarative-environment-records">Declarative Environment Record</a> as their <a href=
    "#sec-execution-contexts">LexicalEnvironment</a> .</p>
  </es-note>

  <es-note>
    <p>When <es-nt>calleeContext</es-nt> is removed from <a href="#sec-execution-contexts">the
    execution context stack</a> it must not be destroyed because it may have been <a href=
    "#sec-execution-contexts">suspended</a> and retained by a generator object for later
    resumption<i>.</i></p>
  </es-note>
</es-clause>
