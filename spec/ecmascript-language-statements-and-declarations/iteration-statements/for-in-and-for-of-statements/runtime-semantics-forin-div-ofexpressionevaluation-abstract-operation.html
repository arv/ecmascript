<!doctype html>
<es-clause title="Runtime Semantics: ForIn/OfExpressionEvaluation Abstract Operation" anchor=
"sec-runtime-semantics-forin-div-ofexpressionevaluation-abstract-operation">
  <p>The abstract operation ForIn/OfExpressionEvaluation is called with arguments
  <es-nt>expr</es-nt>, <es-nt>iterationKind</es-nt>, and <i>labelSet</i>. The value of
  <es-nt>iterationKind</es-nt> is either <b>enumerate</b> or <b>iterate</b>.</p>

  <ol class="proc">
    <li>Let <i>exprRef</i> be the result of evaluating the production that is <i>expr</i>.</li>

    <li>Let <i>exprValue</i> be <a href="#sec-getvalue">GetValue</a> (<i>exprRef</i>).
    </li>

    <li>If <i>exprValue</i> is an <a href="#sec-completion-record-specification-type">abrupt
    completion</a> ,

      <ol class="block">
        <li>If <a href="#sec-loopcontinues">LoopContinues</a> (<i>exprValue</i>,<i>labelSet</i>) is
        <b>false</b>, then return <i>exprValue</i>.
        </li>

        <li>Else, return <a href="#sec-completion-record-specification-type">Completion</a>
        {[[type]]: break, [[value]]: empty, [[target]]: empty}.
        </li>
      </ol>
    </li>

    <li>If <i>exprValue</i>.[[value]] is <b>null</b> or <b>undefined</b>, return <a href=
    "#sec-completion-record-specification-type">Completion</a> {[[type]]: break, [[value]]: empty,
    [[target]]: empty}.
    </li>

    <li>Let <i>obj</i> be <a href="#sec-toobject">ToObject</a> (<i>exprValue</i>).
    </li>

    <li>If <i>iterationKind</i> is enumerate, then

      <ol class="block">
        <li>Let <i>keys</i> be the result of calling the [[Enumerate]] internal method of
        <i>obj</i> with no arguments.</li>
      </ol>
    </li>

    <li>Else,

      <ol class="block">
        <li>
          <a href="#sec-algorithm-conventions">Assert</a> : <i>iterationKind</i> is iterate.
        </li>

        <li>Let <i>keys</i> be <a href="#sec-getiterator">GetIterator</a> (<i>obj</i>).
        </li>
      </ol>
    </li>

    <li>If <i>keys</i> is an <a href="#sec-completion-record-specification-type">abrupt
    completion</a> , then

      <ol class="block">
        <li>If <a href="#sec-loopcontinues">LoopContinues</a> (<i>keys</i>,<i>labelSet</i>) is <b>
          false</b>, then return <i>keys</i>.
        </li>

        <li>
          <a href="#sec-algorithm-conventions">Assert</a> : <i>keys</i>.[[type]] is continue
        </li>

        <li>Return <a href="#sec-completion-record-specification-type">Completion</a> {[[type]]:
        break, [[value]]: empty, [[target]]: empty}.
        </li>
      </ol>
    </li>

    <li>Return <i>keys</i>.</li>
  </ol>
</es-clause>
