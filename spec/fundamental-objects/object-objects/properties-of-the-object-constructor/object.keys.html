<!doctype html>
<es-clause title="Object.keys ( O )" anchor="sec-object.keys">
  <p>When the <b>keys</b> function is called with argument <es-nt>O</es-nt>, the following steps
  are taken:</p>

  <ol class="proc">
    <li>Let <i>obj</i> be <es-xref target="sec-toobject">ToObject</es-xref>(<i>O</i>).</li>

    <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>obj</i>).</li>

    <li>Let <i>keys</i> be the result of calling the [[OwnPropertyKeys]] internal method of
    <i>obj</i>.</li>

    <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>keys</i>).</li>

    <li>Let <i>nameList</i> be a new empty <es-xref target=
    "sec-list-and-record-specification-type">List</es-xref>.</li>

    <li>Let <i>gotAllNames</i> be <b>false</b>.</li>

    <li>Repeat while <i>gotAllNames</i> is <b>false</b>,

      <ol class="block">
        <li>Let <i>next</i> be the result of <es-xref target=
        "sec-iteratorstep">IteratorStep</es-xref>(<i>keys</i>).</li>

        <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>next</i>).</li>

        <li>If <i>next</i> is <b>false</b>, then let <i>gotAllNames</i> be <b>true</b>.</li>

        <li>Else,

          <ol class="block">
            <li>Let <i>nextKey</i> be <es-xref target=
            "sec-iteratorvalue">IteratorValue</es-xref>(<i>next</i>).</li>

            <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>nextKey</i>).</li>

            <li>If <es-xref target=
            "sec-ecmascript-data-types-and-values">Type</es-xref>(<i>nextKey</i>) is String, then

              <ol class="block">
                <li>Let <i>desc</i> be the result of calling the [[GetOwnProperty]] internal method
                of <i>O</i> with argument <i>nextKey</i>.</li>

                <li><es-xref target=
                "sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>desc</i>).</li>

                <li>If <i>desc</i> is not <b>undefined</b> and <i>desc</i>.[[Enumerable]] is
                <b>true</b>, then

                  <ol class="block">
                    <li>Append <i>nextKey</i> as the last element of <i>nameList</i>.</li>
                  </ol>
                </li>
              </ol>
            </li>
          </ol>
        </li>
      </ol>
    </li>

    <li>Return <es-xref target=
    "sec-createarrayfromlist">CreateArrayFromList</es-xref>(<i>nameList</i>).</li>
  </ol>

  <p>If an implementation defines a specific order of enumeration for the for-in statement, the
  same order must be used for the elements of the array returned in step 8.</p>
</es-clause>
