<!doctype html>
<es-clause title="unescape (string)" anchor="sec-unescape-string">
  <p>The <code>unescape</code> function is a property of the global object. It computes a new
  version of a String value in which each escape sequence of the sort that might be introduced by
  the <code>escape</code> function is replaced with the character that it represents.</p>

  <p>When the <code>unescape</code> function is called with one argument <es-nt>string</es-nt>, the
  following steps are taken:</p>

  <ol class="proc">
    <li>Let <i>string</i> be <es-xref target="sec-tostring">ToString</es-xref>(<i>string</i>).</li>

    <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>string</i>).</li>

    <li>Let <i>length</i> be the number of code units in <i>string</i>.</li>

    <li>Let <i>R</i> be the empty String.</li>

    <li>Let <i>k</i> be 0.</li>

    <li>Repeat, while <i>k</i> ≠ <i>length</i>

      <ol class="block">
        <li>Let <i>c</i> be the code unit at position <i>k</i> within <i>string</i>.</li>

        <li>If <i>c</i> is <code>%</code>,

          <ol class="block">
            <li>If <i>k</i> ≤ <i>length</i>−6 and the code unit at position <i>k</i>+1 within
            <i>string</i> is <code>u</code> and the four code units at positions <i>k</i>+2,
            <i>k</i>+3, <i>k</i>+4, and <i>k</i>+5 within <i>string</i> are all hexadecimal digits,
            then

              <ol class="block">
                <li>Let <i>c</i> be the code unit whose value is the integer represented by the
                four hexadecimal digits at positions <i>k</i>+2, <i>k</i>+3, <i>k</i>+4, and
                <i>k</i>+5 within <i>string</i>.</li>

                <li>Increase <i>k</i> by 5.</li>
              </ol>
            </li>

            <li>Else if <i>k</i> ≤ <i>length</i>−3 and the two code units at positions <i>k</i>+1
            and <i>k</i>+2 within <i>string</i> are both hexadecimal digits, then

              <ol class="block">
                <li>Let <i>c</i> be the code unit whose value is the integer represented by two
                zeroes plus the two hexadecimal digits at positions <i>k</i>+1 and <i>k</i>+2
                within <i>string</i>.</li>

                <li>Increase <i>k</i> by 2.</li>
              </ol>
            </li>
          </ol>
        </li>

        <li>Let <i>R</i> be a new String value computed by concatenating the previous value of
        <i>R</i> and <i>c</i>.</li>

        <li>Increase <i>k</i> by 1.</li>
      </ol>
    </li>

    <li>Return <i>R</i>.</li>
  </ol>
</es-clause>
