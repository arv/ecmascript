<!doctype html>
<es-clause title="ToPropertyDescriptor ( Obj )" anchor="sec-topropertydescriptor">
  <p>When the abstract operation ToPropertyDescriptor is called with object <es-nt>Obj</es-nt>, the
  following steps are taken:</p>

  <ol class="proc">
    <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>Obj</i>).</li>

    <li>If <es-xref target="sec-ecmascript-data-types-and-values">Type</es-xref>(<i>Obj</i>) is not
    Object throw a <b>TypeError</b> exception.</li>

    <li>Let <i>desc</i> be the result of creating a new <es-xref target=
    "sec-property-descriptor-specification-type">Property Descriptor</es-xref> that initially has
    no fields.</li>

    <li>If the result of <es-xref target="sec-hasproperty">HasProperty</es-xref>(<i>Obj</i>,
    "<code>enumerable</code>") is <b>true</b>, then

      <ol class="block">
        <li>Let <i>enum</i> be the result of <es-xref target=
        "sec-get-o-p">Get</es-xref>(<i>Obj</i>, "<code>enumerable</code>").</li>

        <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>enum</i>).</li>

        <li>Set the [[Enumerable]] field of <i>desc</i> to <es-xref target=
        "sec-toboolean">ToBoolean</es-xref>(<i>enum</i>).</li>
      </ol>
    </li>

    <li>If the result of <es-xref target="sec-hasproperty">HasProperty</es-xref>(<i>Obj</i>,
    "<code>configurable</code>") is <b>true</b>, then

      <ol class="block">
        <li>Let <i>conf</i> be the result of <es-xref target=
        "sec-get-o-p">Get</es-xref>(<i>Obj</i>, "<code>configurable</code>").</li>

        <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>conf</i>).</li>

        <li>Set the [[Configurable]] field of <i>desc</i> to <es-xref target=
        "sec-toboolean">ToBoolean</es-xref>(<i>conf</i>).</li>
      </ol>
    </li>

    <li>If the result of <es-xref target="sec-hasproperty">HasProperty</es-xref>(<i>Obj</i>,
    "<code>value</code>") is <b>true</b>, then

      <ol class="block">
        <li>Let <i>value</i> be the result of <es-xref target=
        "sec-get-o-p">Get</es-xref>(<i>Obj</i>, "<code>value</code>").</li>

        <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>value</i>).</li>

        <li>Set the [[Value]] field of <i>desc</i> to <i>value</i>.</li>
      </ol>
    </li>

    <li>If the result of <es-xref target="sec-hasproperty">HasProperty</es-xref>(<i>Obj</i>,
    "<code>writable</code>") is <b>true</b>, then

      <ol class="block">
        <li>Let <i>writable</i> be the result of <es-xref target=
        "sec-get-o-p">Get</es-xref>(<i>Obj</i>, "<code>writable</code>").</li>

        <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>writable</i>).</li>

        <li>Set the [[Writable]] field of <i>desc</i> to <es-xref target=
        "sec-toboolean">ToBoolean</es-xref>(<i>writable</i>).</li>
      </ol>
    </li>

    <li>If the result of <es-xref target="sec-hasproperty">HasProperty</es-xref>(<i>Obj</i>,
    "<code>get</code>") is <b>true</b>, then

      <ol class="block">
        <li>Let <i>getter</i> be the result of <es-xref target=
        "sec-get-o-p">Get</es-xref>(<i>Obj</i>, "<code>get</code>").</li>

        <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>getter</i>).</li>

        <li>If <es-xref target="sec-iscallable">IsCallable</es-xref>(<i>getter</i>) is <b>false</b>
        and <i>getter</i> is not <b>undefined</b>, then throw a <b>TypeError</b> exception.</li>

        <li>Set the [[Get]] field of <i>desc</i> to <i>getter</i>.</li>
      </ol>
    </li>

    <li>If the result of <es-xref target="sec-hasproperty">HasProperty</es-xref>(<i>Obj</i>,
    "<code>set</code>") is <b>true</b>, then

      <ol class="block">
        <li>Let <i>setter</i> be the result of <es-xref target=
        "sec-get-o-p">Get</es-xref>(<i>Obj</i>, "<code>set</code>").</li>

        <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>setter</i>).</li>

        <li>If <es-xref target="sec-iscallable">IsCallable</es-xref>(<i>setter</i>) is <b>false</b>
        and <i>setter</i> is not <b>undefined</b>, then throw a <b>TypeError</b> exception.</li>

        <li>Set the [[Set]] field of <i>desc</i> to <i>setter</i>.</li>
      </ol>
    </li>

    <li>If either <i>desc</i>.[[Get]] or <i>desc</i>.[[Set]] are present, then

      <ol class="block">
        <li>If either <i>desc</i>.[[Value]] or <i>desc</i>.[[Writable]] are present, then throw a
        <b>TypeError</b> exception.</li>
      </ol>
    </li>

    <li>Set the [[Origin]] field of <i>desc</i> to <i>Obj</i>.</li>

    <li>Return <i>desc</i>.</li>
  </ol>
</es-clause>
